---
language: php

cache:
  directories:
  # - $HOME/.composer/cache/files

php:
- nightly
- 7.2
- 7.1
- 7.0
- 5.6
- 5.5
- 5.4

services:
- mysql
- postgresql

env:
  # global:
  # matrix:

matrix:
  fast_finish: true
  include:
  allow_failures:
  - php: nightly

before_install:
- php -r "echo phpinfo().PHP_EOL;"
- php -r "echo ini_get('memory_limit').PHP_EOL;" # See phpinfo!
- command -v phpdbg
- if [ -f /home/travis/.phpenv/versions/$(phpenv version-name)/etc/conf.d/xdebug.ini ]; then
    cat /home/travis/.phpenv/versions/$(phpenv version-name)/etc/conf.d/xdebug.ini
    echo removing xdebug.ini;
    phpenv config-rm xdebug.ini;
  fi

script: true

after_script:
- ls --color ~/.phpenv/versions/$(phpenv version-name)/bin
- php ~/.phpenv/versions/$(phpenv version-name)/bin/composer
- php ~/.phpenv/versions/$(phpenv version-name)/bin/phpunit

